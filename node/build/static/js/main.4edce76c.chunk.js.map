{"version":3,"sources":["utils/fit2rem.js","utils/index.js","components/Alert/index.jsx","api/serverApi.js","api/index.js","views/Login/index.jsx","components/Message/components/Timer/index.jsx","components/Message/components/Content/index.jsx","components/Message/index.jsx","components/Heading/index.jsx","components/ChatInput/index.jsx","components/Notice/index.jsx","views/Chat/index.jsx","router/index.js","index.js","App.jsx"],"names":["win","lib","tid","doc","document","docEl","documentElement","metaEl","querySelector","flexibleEl","dpr","scale","flexible","console","warn","match","getAttribute","parseFloat","parseInt","content","initialDpr","maximumDpr","toFixed","devicePixelRatio","setAttribute","createElement","firstElementChild","appendChild","wrap","write","innerHTML","refreshRem","width","getBoundingClientRect","rem","style","fontSize","addEventListener","clearTimeout","setTimeout","e","persisted","readyState","body","rem2px","d","val","this","px2rem","window","changeTitle","title","parseTime","fmt","time","data","fmsMapTime","Object","prototype","toString","call","includes","Date","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","str","test","replace","RegExp","$1","getFullYear","substr","length","getDay","getCookieObj","cookie","split","reduce","total","cur","key","value","getCookie","Alert","isShow","description","confirmText","cancelText","onConfirm","onCancel","Fragment","className","onClick","login","params","a","axios","post","URL","getMsgList","get","Login","props","handleChangeUsername","event","username","target","setState","handleChangePawsword","password","handleClickSubmitUserData","state","showAlert","status","message","history","from","onAlertConfirm","AlertProps","location","pathname","src","alt","htmlFor","type","id","placeholder","onChange","React","Component","MessageTimer","formatMillisecond","diffTime","now","valueOf","round","formatedTime","timer","setInterval","clearInterval","getuserIcon","name","hasCn","slice","Content","isSelf","Message","isShowTime","Heading","heading","count","ChatInput","handleKeyUpMessage","ctrlKey","keyCode","handleClickSendMessage","onsendMsg","handleChangeMessage","onKeyUp","Chat","renderMessageList","list","ownUserName","map","idx","_id","appendChatList","preState","msgList","sliderDownNews","sendMsgMethod","chatName","socket","emit","chatWrapRef","current","scrollTop","offsetHeight","decodeURI","memberCount","createRef","res","io","on","error","ref","Router","exact","path","component","PrivateRouter","children","render","to","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.4edce76c.chunk.js","sourcesContent":["/* eslint-disable no-useless-escape */\n;(function(win, lib) {\n    var doc = win.document;\n    var docEl = doc.documentElement;\n    var metaEl = doc.querySelector('meta[name=\"viewport\"]');\n    var flexibleEl = doc.querySelector('meta[name=\"flexible\"]');\n    var dpr = 0;\n    var scale = 0;\n    var tid;\n    var flexible = lib.flexible || (lib.flexible = {});\n    if (metaEl) {\n        console.warn('将根据已有的meta标签来设置缩放比例');\n        var match = metaEl.getAttribute('content').match(/initial\\-scale=([\\d\\.]+)/);\n        if (match) {\n            scale = parseFloat(match[1]);\n            dpr = parseInt(1 / scale, 10);\n        }\n    } else if (flexibleEl) {\n        var content = flexibleEl.getAttribute('content');\n        if (content) {\n            var initialDpr = content.match(/initial\\-dpr=([\\d\\.]+)/);\n            var maximumDpr = content.match(/maximum\\-dpr=([\\d\\.]+)/);\n            if (initialDpr) {\n                dpr = parseFloat(initialDpr[1]);\n                scale = parseFloat((1 / dpr).toFixed(2));\n            }\n            if (maximumDpr) {\n                dpr = parseFloat(maximumDpr[1]);\n                scale = parseFloat((1 / dpr).toFixed(2));\n            }\n        }\n    }\n    if (!dpr && !scale) {\n        var devicePixelRatio = win.devicePixelRatio;\n        if (devicePixelRatio >= 3 && (!dpr || dpr >= 3)) {\n            dpr = 3;\n        } else if (devicePixelRatio >= 2 && (!dpr || dpr >= 2)){\n            dpr = 2;\n        } else {\n            dpr = 1;\n        }\n        scale = 1 / dpr;\n    }\n\n    docEl.setAttribute('data-dpr', dpr);\n    if (!metaEl) {\n        metaEl = doc.createElement('meta');\n        metaEl.setAttribute('name', 'viewport');\n        metaEl.setAttribute('content', 'initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n        if (docEl.firstElementChild) {\n            docEl.firstElementChild.appendChild(metaEl);\n        } else {\n            var wrap = doc.createElement('div');\n            wrap.appendChild(metaEl);\n            doc.write(wrap.innerHTML);\n        }\n    }\n\n    function refreshRem(){\n        var width = docEl.getBoundingClientRect().width;\n        if (width / dpr > 750) {\n            width = 750 * dpr;\n        }\n        var rem = width / 10;\n        docEl.style.fontSize = rem + 'px';\n        flexible.rem = win.rem = rem;\n    }\n\n\n    win.addEventListener('resize', function() {\n        clearTimeout(tid);\n        tid = setTimeout(refreshRem, 300);\n    }, false);\n    win.addEventListener('pageshow', function(e) {\n        if (e.persisted) {\n            clearTimeout(tid);\n            tid = setTimeout(refreshRem, 300);\n        }\n    }, false);\n\n    if (doc.readyState === 'complete') {\n        doc.body.style.fontSize = 12 * dpr + 'px';\n    } else {\n        doc.addEventListener('DOMContentLoaded', function(e) {\n            doc.body.style.fontSize = 12 * dpr + 'px';\n        }, false);\n    }\n\n\n    refreshRem();\n\n    flexible.dpr = win.dpr = dpr;\n    flexible.refreshRem = refreshRem;\n    flexible.rem2px = function(d) {\n        var val = parseFloat(d) * this.rem;\n        if (typeof d === 'string' && d.match(/rem$/)) {\n            val += 'px';\n        }\n        return val;\n    }\n    flexible.px2rem = function(d) {\n        var val = parseFloat(d) / this.rem;\n        if (typeof d === 'string' && d.match(/px$/)) {\n            val += 'rem';\n        }\n        return val;\n    }\n})(window, window['lib'] || (window['lib'] = {}));","// 动态修改titile\nexport const changeTitle = (title = '摸鱼俱乐部') => {\n    document.title = title;\n}\n\n// 获取所有数据的类型文本\nexport const getDataType = (data) => {\n    return Object.prototype.toString.call(data);\n}\n\n// 将时间修改为可展示的时间文本\nexport const parseTime = (fmt, time) => {\n    const type = getDataType(time);\n    time = type.includes('Date') ? time : new Date(time);\n    const fmsMapTime = {\n        \"M+\": time.getMonth() + 1, // 月份\n        \"d+\": time.getDate(), // 日\n        \"h+\": time.getHours() % 12 === 0 ? 12 : time.getHours() % 12, // 小时\n        \"H+\": time.getHours(),\n        \"m+\": time.getMinutes(), // 分\n        \"s+\": time.getSeconds(), // 秒\n        \"q+\": Math.floor((time.getMonth() + 3) / 3), // 季度\n        \"S\": time.getMilliseconds() // 毫秒\n    }\n\n    const fmsMapWeek = [\n        \"一\",         \n        \"二\",         \n        \"三\",         \n        \"四\",         \n        \"五\",         \n        \"六\",\n        \"日\",         \n    ]\n\n    if(/(y+)/.test(fmt)){\n        fmt = fmt.replace(RegExp.$1, (time.getFullYear()+\"\").substr(4 - RegExp.$1.length));         \n    }\n    if(/(E+)/.test(fmt)){\n        fmt = fmt.replace(RegExp.$1, ((RegExp.$1.length > 1) ? (RegExp.$1.length > 2 ? \"星期\" : \"周\") : \"\") + fmsMapWeek[time.getDay() + \"\"]);         \n    }\n    for(var str in fmsMapTime){\n        if(new RegExp(\"(\"+ str +\")\").test(fmt)){\n            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (fmsMapTime[str]) : ((\"00\" + fmsMapTime[str]).substr((\"\" + fmsMapTime[str]).length)));         \n        }\n    }\n    return fmt; \n}\n\n// 获取当前cookie数据对象\nexport const getCookieObj = () => {\n    const cookies = document.cookie.split(';');\n    return cookies.reduce((total, cur) => {\n        const [key, value] = cur.split('=');\n        return {\n            ...total,\n            [key]: value\n        }\n    }, {})\n}\n// 获取cookie数据\nexport const getCookie = (key) => {\n    const cookies = getCookieObj();\n    return cookies[key];\n}\n","import React from 'react';\n\nimport './index.scss';\n\nexport default function Alert({isShow, title = '提示', description = '', confirmText = '好的吧', cancelText = '算了', onConfirm, onCancel = null}){\n    return (\n        <React.Fragment>\n            {\n                isShow ? (\n                    <div className=\"alert-cover\">\n                        <div className=\"alert\">\n                            <div className=\"alert__heading\">{title}</div>\n                            <div className=\"alert__description\">{description}</div>\n                            <div className=\"alert__buttons\">\n                                {onCancel && <button className=\"alert__buttons_cancel\" onClick={onCancel}>{cancelText}</button>}\n                                <button className=\"alert__buttons_confirm\" onClick={onConfirm}>{confirmText}</button>\n                            </div>\n                        </div>\n                    </div>\n                ) : null\n            }\n        </React.Fragment>\n    )\n}","export default {\n    login: 'api/login',\n    getMsgList: '/api/getMsgList'\n}","import axios from 'axios'\nimport URL from './serverApi';\n\n\n// 注册/登录\nexport const login = async (params) => {\n    const {data} = await axios.post(URL.login, params);\n    return data;\n}\n\n// 获取聊天记录\nexport const getMsgList = async (params) => {\n    const {data} = await axios.get(URL.getMsgList, params);\n    return data;\n}\n","import React from 'react';\nimport Alert from '@/components/Alert';\n\nimport {login} from '@/api'\nimport './index.scss';\n\nexport default class Login extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            username: '',\n            password: '',\n            AlertProps: {\n                isShow: false,\n                title: '提示',\n                description: '',\n                onConfirm: this.onAlertConfirm,\n            },\n            // 获取到from信息\n            from: this.props.location.state.from || {pathname: '/'}\n        }\n        \n    }\n    // 输入用户名\n    handleChangeUsername = (event) => {\n        const username = event.target.value.replace(/\\s+/, '');\n        this.setState({\n            username\n        })\n    }\n    \n    // 输入密码\n    handleChangePawsword = (event) => {\n        const password = event.target.value;\n        this.setState({\n            password\n        })\n    }\n\n    // 进入\n    handleClickSubmitUserData = async () => {\n        const {username, password} = this.state;\n        if(!username) return this.showAlert('请输入摸鱼者大名！');\n        if(!password) return this.showAlert('请输入摸鱼口令！');\n        if(username.length < 2) return this.showAlert('行走江湖名号怎可少于两个字！');\n        if(username.length > 8) return this.showAlert('摸鱼人的大名再大也大不过八个字！');\n        if(password.length < 6) return this.showAlert('口令太短，阁下请重新输过！');\n        if(password.length > 16) return this.showAlert('口令这么长，我都记不过来！');\n\n        const data = await login({username, password});\n        if(data.status !== 1) return this.showAlert(data.message);\n        \n        // 验证成功，跳转回前一个页面\n        this.props.history.replace(this.state.from);\n    }\n\n    // 弹框展示\n    showAlert(description, title = '提示'){\n        this.setState(({AlertProps}) => ({\n            AlertProps: {\n                ...AlertProps,\n                isShow: true,\n                title,\n                description\n            }\n        }))\n    }\n\n    // 弹框中的确定\n    onAlertConfirm = () => {\n        this.setState(({AlertProps}) => ({\n            AlertProps: {\n                ...AlertProps,\n                isShow: false,\n                description: ''\n            }\n        }))   \n    }\n    \n    render(){\n        return (\n            <div className=\"login\">\n                <img className=\"login__sologan\" src=\"./sologan.svg\" alt=\"武陵人摸鱼为业\"/>\n                <div className=\"login__input\">\n                    <label htmlFor=\"username\" className=\"login__input_label\">摸鱼人：</label>\n                    <input\n                        type=\"text\"\n                        id=\"username\" \n                        placeholder=\"请输入昵称\"\n                        value={this.state.username}\n                        onChange={this.handleChangeUsername}\n                    />\n                </div>\n                <div className=\"login__input\">\n                    <label htmlFor=\"password\" className=\"login__input_label\">摸鱼口令：</label>\n                    <input \n                        id=\"password\" \n                        type=\"password\" \n                        placeholder=\"请输入密码\"\n                        value={this.state.password} \n                        onChange={this.handleChangePawsword}\n                    />\n                </div>\n                <div className=\"login__submit\">\n                    <input\n                        value=\"进 入\" \n                        type=\"button\" \n                        onClick={this.handleClickSubmitUserData}\n                    />\n                </div>\n\n                <Alert {...this.state.AlertProps}/>\n            </div>\n        )\n    }\n}","import React from 'react'\nimport {parseTime} from 'utils';\nimport './index.scss';\n\nclass MessageTimer extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            formatedTime: '0秒前',\n        }\n        this.timer = null;\n    }\n    \n    componentDidMount() {\n        this.setState({\n            formatedTime: this.formatMillisecond(this.props.time)\n        })\n        this.timer = setInterval(() => {\n            this.setState({\n                formatedTime: this.formatMillisecond(this.props.time)\n            })\n        }, 60000);\n    }\n\n    componentWillUnmount() {\n        if(this.timer) clearInterval(this.timer);\n    }\n    \n    formatMillisecond = (time) => {\n        const now = Date.now();\n        time = new Date(time).valueOf();\n        const diffTime = now - time;\n        if(diffTime < 60 * 1000){\n            return `${parseInt(diffTime / 1000, 10)}秒前`;\n        }else if(diffTime < 60 * 60 * 1000){\n            return `${parseInt(diffTime / (60 * 1000), 10)}分前`;\n        }else if(diffTime < 12 * 60 * 60 * 1000){\n            return `${parseInt(diffTime / (60 * 60 * 1000), 10)}小时前`;\n        }else if(diffTime < 30 * 24 * 60 * 60 * 1000){\n            return `${Math.round(diffTime / (24 * 60 * 60 * 1000))}天前`;\n        }else{\n            return parseTime('M月d日EE HH:mm:ss', time);\n        }\n    }\n    render() { \n        return (\n            <div className=\"message_time\">\n                <p>{this.state.formatedTime}</p>\n            </div>\n        );\n    }\n}\n \nexport default MessageTimer","import React from 'react'\nimport './index.scss';\n\nconst getuserIcon = (name = '') => {\n    const hasCn = name.match(/[\\u4e00-\\u9fa5]/g);\n    if(hasCn && hasCn.length){\n        const length = name.length;\n        return name.slice(length - 2);\n    }else{\n        return name.slice(0, 4);\n    }\n}\n\nexport default function Content({isSelf, username, content}){\n    return(\n        <div className={`message ${isSelf ? 'right' : 'left'}_message`}>\n            <div className=\"user\">\n                <span className=\"user_icon\">{getuserIcon(username)}</span>\n            </div>\n            <div className=\"speech\">\n                <div className=\"username\">{username}</div>\n                <div className=\"content\">{content}</div>\n            </div>\n        </div>\n    )\n}\n\n\n","import React from 'react'\nimport Timer from './components/Timer'\nimport Content from './components/Content'\n\nexport default function Message({isShowTime, time, content, username, isSelf = false}){\n    return (\n        <div className=\"message_wrap\">\n            {isShowTime && <Timer time={time}/>}\n            <Content\n                isSelf={isSelf}\n                username={username}\n                content={content}\n            />\n        </div>\n    )\n}","import React from 'react'\nimport './index.scss';\n\nexport default function Heading({heading, count}){\n    return (\n        <div className=\"chat__heading\">{heading}({count})</div>\n    )\n}\n","import React, { Component } from 'react';\nimport './index.scss';\n\nclass ChatInput extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { \n            message: '',\n        }\n    }\n    handleKeyUpMessage = (event) => {\n        if(event.ctrlKey && event.keyCode === 13) this.handleClickSendMessage();\n    }\n    handleClickSendMessage = () => {\n        this.props.onsendMsg(this.state.message);\n        this.setState({message: ''});\n    }\n    handleChangeMessage = (event) => {\n        this.setState({\n            message: event.target.value\n        });\n    }\n    \n    render() { \n        return ( \n            <div className=\"chat__input\">\n                <textarea\n                    className=\"chat__input_white\"\n                    value={this.state.message}\n                    onChange={this.handleChangeMessage}\n                    onKeyUp={this.handleKeyUpMessage}\n                />\n                <button\n                    className=\"chat__input_btn\"\n                    onClick={this.handleClickSendMessage}\n                >发送</button>\n            </div>\n        );\n    }\n}\n \nexport default ChatInput;","import React from 'react'\nimport './index.scss';\n\nexport default function({content}) {\n    return (\n        <div className=\"notice_wrap\">\n            {content}\n        </div>\n    )\n}","import React from 'react';\nimport Message from '@/components/Message';\nimport Heading from '@/components/Heading';\nimport io from 'socket.io-client';\nimport ChatInput from '@/components/ChatInput';\nimport Notice from '@/components/Notice';\n\nimport {getMsgList} from '@/api';\nimport { getCookie } from 'utils';\nimport './index.scss';\n\n\nexport default class Chat extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            msgList: [],\n            ownUserName: decodeURI(getCookie('username')),\n            chatName: '摸鱼俱乐部',\n            socket: null,\n            memberCount: 0,\n        }\n        this.chatWrapRef = React.createRef();\n    }\n    \n    async componentDidMount(){\n        try {\n            const {chatName} = this.state;\n            const res = await getMsgList({chatName});\n            if(res.status === 1){\n                const {msgList, chatName} = res.data;\n                this.setState({\n                    msgList,\n                    chatName,\n                    socket: io('ws://localhost:8080')\n                }, () => {\n                    const {ownUserName: username, chatName} = this.state;\n                    // 建立ws连接\n                    const {socket} = this.state;\n                    socket.on('connect', function(){\n                        // 初始化\n                        socket.emit('init', username);\n                    })\n                    // 系统通知\n                    .on('notice', (data) => {\n                        const {memberCount, message} = data;\n                        this.appendChatList(message);\n                        this.setState({memberCount});\n                    })\n                    // 接收信息\n                    .on('news', this.appendChatList)\n                        \n                    // 滚动条定位到最新的聊天信息\n                    this.sliderDownNews();\n                })\n            }\n        } catch (error) {\n            console.error(error);\n        }\n        \n    }\n    // 渲染消息列表\n    renderMessageList = (list, ownUserName) => {\n        return list.map(({_id, time, username, content, event}, idx) => {\n            if(event === 'notice'){\n                return (\n                    <Notice\n                        key={_id}\n                        content={content}\n                    />\n                )\n            }else{\n                return (\n                    <Message\n                        key={_id}\n                        time={time}\n                        content={content}\n                        username={username}\n                        isShowTime={idx % 4 === 0}\n                        isSelf={username === ownUserName}\n                    />\n                )\n            }\n        })\n    }\n    // 更新msgList的回调\n    appendChatList = (message) => {\n        this.setState((preState) => ({\n            msgList: [\n                ...preState.msgList,\n                message\n            ]\n        }), () => {\n            this.sliderDownNews();\n        })\n    }\n    // 发送信息\n    sendMsgMethod = (content) => {\n        const {chatName, ownUserName: username} = this.state;\n        this.state.socket.emit('chat', {content, chatName, username});\n    }\n    // 滑动到最新消息处\n    sliderDownNews = () => {\n        this.chatWrapRef.current.scrollTop = this.chatWrapRef.current.offsetHeight;\n    }\n    \n    render(){\n        const {ownUserName, chatName, msgList, memberCount} = this.state;\n        return (\n            <div className=\"chat\">\n                <Heading heading={chatName} count={memberCount}/>\n                <div className=\"chat__content\" ref={this.chatWrapRef}>\n                    {this.renderMessageList(msgList, ownUserName)}\n                </div>\n                <ChatInput\n                    onsendMsg={this.sendMsgMethod}\n                />\n            </div>\n        )\n    }\n}","import React from 'react';\nimport {Route, Switch, Redirect} from 'react-router-dom';\nimport {getCookie} from 'utils';\nimport Login from '@/views/Login';\nimport Chat from '@/views/Chat';\n\nexport default class Router extends React.Component{\n    render(){\n        return (\n            <Switch>\n                {/* 登录 */}\n                <Route exact path=\"/login\" component={Login}/>\n                {/* 聊天界面 */}\n                <PrivateRouter path=\"/\">\n                    <Chat/>\n                </PrivateRouter>\n            </Switch>\n        )\n    }\n}\n\n// 权限拦截\nfunction PrivateRouter({children, ...props}){\n    return (\n        <Route\n            {...props}\n            render={({location}) => {\n                const hasAuthority = getCookie('username');\n                if(hasAuthority){\n                    return children;\n                }else{\n                    return <Redirect to={{\n                        pathname: '/login',\n                        state: {from: location}\n                    }}/>\n                }\n            }}\n        />\n    )\n}","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nimport 'utils/fit2rem.js/'\nimport './css/index.scss'\n\nReactDOM.render(\n    <App/>,\n    document.getElementById('root')\n);","import React from 'react';\nimport {HashRouter} from 'react-router-dom';\nimport Router from './router';\nimport {changeTitle} from 'utils';\n\nexport default function App(){\n    changeTitle();\n    return (\n        <HashRouter>\n            <Router/>\n        </HashRouter>\n    );\n}"],"sourceRoot":""}